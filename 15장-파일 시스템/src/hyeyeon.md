# 파일과 디렉터리

## 파일

파일: 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합을 의미
파일의 부가 정보 -> 속성, 메타데이터

### 파일 연산을 위한 시스템 호출

파일을 다루는 모든 작업은 운영체제에 의해 이뤄진다. 어떤 응용 프로그램도 임의로 파일을 조작할 수 없으며 파일을 다루려면 운영체제에 부탁해야 한다. 이를 위해 운영체제는 다음과 같은 파일 연산을 위한 시스템 호출을 제공한다
생성, 삭제, 열기, 닫기, 읽기, 쓰기

## 디렉터리

파일들을 일목요연하게 관리하기 위해 디렉터리를 이용할 수 있다. 윈도우 운영체제에서는 디렉터리를 폴더라고 한다

상대 경로: 현재 디렉터리부터 시작하는 경로
절대 경로: 루트 디렉터리에서 자기 자신까지 이르는 고유한 경로

# 파일 시스템

## 파티셔닝과 포매팅

보조기억 장치를 사용하려면 파티션을 나누는 작업(파티셔닝)과 포맷 작업(포매팅)을 거챠야 하기 때문

**파티셔닝** : 저장 장치의 논리적인 영역을 구획하는 작업을 의미한다.
**파티션**: 파티셔닝 작업을 통해 나누어진 영역 하나하나를 파티션이라고 한다

## 파일 할당 방법

운영체제는 파일과 디렉터리를 블록 단위로 읽고 씁니다. 하나의 파일이 보조기억장치에 저장딜 때는 하나 이상의 블록에 걸쳐 저장된다
하드 디스크의 가장 작은 저장 단위는 섹터이지만, 운영체제는 하나 이상의 섹터를 블록이라는 단위로 묶은 뒤 블록 단위로 파일과 디렉터리를 관리

이런 상황에서 파일을 보조기억장치에 할당하는 방법은 크게 두 가지가 있다

1. 연속 할당
2. 불연속 할당

- 연결 할당
- 색인 할당

### 연속 할당

보조기억장치 내 연속적인 블록에 파일을 할당하는 방식, 연속으로 할당된 파일에 접근하기 위해서 파일의 첫 번째 블록 주소와 블록 단위의 길이만 알면 된다

연속으로 저장하기에 구현이 단순하지만, 외부 단평화를 야기한다는 단점이 있다.

### 연결 할당

각 블록 일부에 다음 블록 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당하는 방식

파일을 이루는 데이터를 연결 리스트로 관리 연결할당은 불연속 할당의 일종이기에 파일이 여러 블록에 흩어져 저장되어도 무방하다
연결 할당은 외부 단편화 문제를 해결하지만 이 또한 단점이 있다.

1. 반드시 첫 번째 블록부터 하나씩 차례대로 읽어야 한다

- 임의 접근 속도가 매우 느림

2. 하드웨어 고장이나 오류 발생 시 해당 블록 이후 블록은 접근할 수 없다

- 하나의 블록 안에 파일 데이터와 다음 블록 주소가 모두 포함되어 있어 하드웨어 고장이나 오류로 인해 파일을 이루는 블록에 하나라도 문제가 발샐하면 그 블록 이후의 블록에 접근할 수 없다.

### 색인 할당

파일의 모든 블록 주소를 색인 블록이라는 하나의 블록에 모아 관리하는 방식, 색인 블록 안에 파일을 구성하는 데이터 블록 주소가 있으므로 색인 블록만 알면 해당 파일 데이터에 접근할 수 있다.
그렇기에 색인 할당을 사용하는 파일 시스템에서는 디렉터리 엔트리에 파일 이름과 더불어 색인 블록 주소를 명시한단

## 파일 시스템 살펴보기

1. FAT 파일 시스템
2. 유닉스 파일 시스템

### FAT 파일 시스템

연결 할당의 단점을 보완한 파일 시스템

각 블록에 포함된 다음 블로그이 주소들을 한데 모아 테이블 형태로 관리하면 앞서 언급한 단점을 해소할 수 있다. 이런 테이블을 파일 할당 테이블이라고 한다

### 유닉스 파일 시스템

색인 할당 기반의 유닉스 파일 시스템
