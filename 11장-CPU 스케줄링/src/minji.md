# CPU 스케줄링 개요

## 프로세스 우선순위

- 입출력 집중 프로세스
  - ex. 비디오 재생, 비디오 백업 작업 등
  - 실행 상태보다는 입출력을 위한 대기 상태에 더 많이 머무름
  - CPU 버스트 < 입출력 버스트
- CPU 집중 프로세스
  - ex. 복잡한 수학 연산, 컴파일, 그래픽 처리 작업 등
  - 대기 상태보다는 실행 상태에 더 많이 머무름
  - CPU 버스트 > 입출력 버스트
- CPU 버스트: CPU를 이용하는 작업
- 입출력 버스트: 입출력 장치를 기다리는 작업
- 입출력 집중 프로세스에 집중적으로 CPU 를 할당시켜 입출력장치를 끊임없이 작동시키고 그 대기시간에 CPU 집중 프로세스들에게 CPU 를 할당하면 더 효율적으로 사용이 가능
- PCB 에 우선 순위를 명시하여 우선순위가 높은 프로세스가 더 빨리, 자주 실행될 수 있도록 함

<br/><br/>

## 스케줄링 큐(Scheduling Queue)

사용할 프로세스을 줄을 세우는 것

- 큐는 FIFO 자료 구조이지만 스케줄링에서의 큐는 반드시 FIFO 일필요는 없음
- 준비큐와 대기큐로 나뉨
  - 준비큐: CPU를 이용하고 싶은 프로세스들의 큐
  - 대기큐: 입출력장치를 이용하기 위해 대기 상태에 있는 프로세스들의 큐
- 준비 상태의 프로세스들의 PCB 는 준비 큐의 마지막에 삽입되어 CPU 사용 차례를 기다림
- 운영체제는 PCB들이 큐에 삽입된 순서대로 프로세스를 하나씩 꺼내어 실행하되, 우선순위가 가장 높은 프로세스를 먼저 실행함
- 대기 상태 프로세스
  1. 입출력이 완료되어 완료 입터럽트가 발생
  2. 대기 큐에서 작업이 완료된 PCB를 찾음
  3. PCB를 준비 상태로 변경
  4. 대기 큐에서 제거함.
  5. PCB 를 준비 큐에 삽입

<br/><br/>

## 선점형과 비선점형 스케줄링

- 선점형 스케줄링(Preemptive Scheduing): 프로세스가 CPU 를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 강제로 자원을 빼앗아 다른 프로세스에게 할당할 수 있는 방식
  - 장점: 자원 독점을 막고 프로세스들에 골고루 자원 배분이 가능함
  - 단점: 문맥 교환 과정에서 오버헤드 발생
- 비선점형 스케줄링(Non-Preemptive Scheduing): 하나의 프로세스가 자원을 사용하고 있다면 프로세스가 스스로 종료되거나 대기 상태가 되기 전까진 다른 프로세스가 끼어들 수 없는 방식
  - 장점: 문맥 교환에서 발생하는 오버헤드가 비교적 적음
  - 단점: 모든 프로세스가 골고루 자원을 사용할 수 없음

<br/><br/><br/><br/>

# CPU 스케줄링 알고리즘

## 스케줄링 알고리즘 종류

### 선입 선처리 스케줄링(FCFS 스케줄링)

- 비선점형 스케줄링
- 준비 큐에 삽입된 순서대로 프로세스들을 처리
- 단점: 프로세스들일 기다리는 시간이 매우 길어질 수 있음
- 호위 효과: 긴 처리 시간의 프로세스로 인해 짧은 처리 시간의 프로세스들이 긴 시간을 대기하는 현상

### 최단 작업 우선 스케줄링(SJF 스케줄링)

- 비선점형 스케줄링으로 구분되지만 선점형으로 구현도 가능
- 이용 시간의 길이가 가장 짧은 프로세스부터 실행

### 라운드 로빈 스케줄링(RR 스케줄링)

- 선점형 스케줄링
- FCFS 스케줄링 + 타임 슬라이스 방식으로 선입 선처리를 진행하되 CPU 사용 가능 시간을 정해두어 정해진 시간이 끝나면 다시 큐의 맨뒤에 삽입하는 방식
- 타임 슬라이스가 지나치게 크면 호위 효과가 생길 여지가 있고 지나치게 작을 경우 문맥 교환 발생이 클 수 있으므로 타임 슬라이스 크기가 매우 중요
- 타임 슬라이스: CPU를 사용할 수 있는 정해진 시간

### 최소 잔여 시간 우선 스케줄링(SRT 스케줄링)

- 선점형 스케줄링
- SJF 스케줄링 + RR 스케줄링
- 정해진 타임 슬라이스만큼 CPU 를 사용하되, 작업 시간이 가장 적은 프로세스를 우선 선택하는 방식

### 우선순위 스케줄링(Priority Scheduling)

- 프로세스들에 우선순위를 부여하고 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 알고리즘
- SJF, SRT 스케줄링은 넓은의미에서 우선순위 스케줄링으로 볼 수 있음
- 단점: 기아(starvation) 현상이 발생할 수 있고 이를 극복하기 위한 대표적인 방법이 에이징임
- 기아현상: 우선순위가 낮은 프로세스는 높은 우선순위의 프로세스로 인해 계속해서 실행이 연기 될 수 있음
- 에이징: 오랫동안 대기한 프로세스의 우선순위를 점차 증가시키는 것

### 다단계 큐 스케줄링

- 우선순위 스케줄링의 발전된 형태로 우선순위 별로 준비 큐를 여러개 사용하는 방식
- 장점: 우선순위를 구분하여 실행하는 것이 쉽고 큐별로 타임슬라이스를 지정하거나 다른 스케줄링 알고리즘을 적용할 수 있음
- 단점: 기아현상 발생할 수 있음

### 다단계 피드백 큐 스케줄링

- 다단계 큐 스케줄링의 발전된 형태로 프로세스가 큐 사이를 이동할 수 있음
- 프로세스는 할당된 타임 슬라이스가 끝난 후 낮은 우선순위 큐로 이동함
- 오래 기다리고 있는 프로세스가 있다면 에이징 기법을 사용해 기아 현상을 예방함
- 가장 일반적인 CPU 스케줄링 알고리즘
